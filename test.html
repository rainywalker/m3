<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style type="text/css">
#divObj{width:90px;height:90px;position:absolute;background:red;line-height:90px;text-align:center;font-size:15px}
</style>

</head>
<body>
<div id="divObj">
Drag me!!
</div>
<script type="text/javascript">

var m3 = {
	dragStart : function(event){
		var doc = document;
		var domObj = doc.getElementById("divObj");
		domObj.onmousedown = function(event){

			var startX = window.event.clientX, startY = window.event.clientY;
			var objX = domObj.offsetLeft, objY = domObj.offsetTop;
			var calX = startX - objX, calY = startY - objY;
			if (doc.addEventListener) {
				doc.addEventListener("mousemove",dragMove,true);
				doc.addEventListener("mouseup",dragEnd,true);
			}
			else {
				domObj.setCapture();
				domObj.attachEvent("onmousemove",dragMove);
				domObj.attachEvent("onmouseup",dragEnd);

			}
			if (window.event.stopPropagation) {
				window.event.stopPropagation();
			}
			else {
				window.event.cancelBubble  = true;
			}
			function dragMove(e) {
				if (!e) e = window.event
				domObj.style.left = e.clientX - calX + "px";
				domObj.style.top = e.clientY - calY + "px";
				if (e.stopPropagation) {
					e.stopPropagation()
				}
				else {
					e.cancelBubble = true
				}
			}
			function dragEnd(e) {
				if (doc.removeEventListener) {
					doc.removeEventListener("mouseup",dragEnd,true);
					doc.removeEventListener("mousemove",dragMove,true);
				}
				else {
					domObj.detachEvent("onmouseup",dragEnd)
					domObj.detachEvent("onmousemove",dragMove);
					domObj.releaseCapture()
				}
				if (e.stopPropagation) {
					e.stopPropagation()
				}
				else {
					e.cancelBubble = true
				}
				
			}
		}
	},
	init : function() {
		m3.dragStart()
	}
}
var nameV = {
	map : "map",
	me : "me",
	main : "main"
}

m3.init()

</script>

</body>
</html>
